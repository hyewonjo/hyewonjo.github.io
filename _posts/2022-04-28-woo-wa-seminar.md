---
layout: posts
title: 2022년 4월 우아한테크세미나 - 지속가능한 SW 개발을 위한 코드리뷰
classes: wide
---
출처 : [Youtube - 지속가능한 SW 개발을 위한 코드리뷰 :: 4월 우아한테크세미나 ](https://youtu.be/ssDMIcPBqUE)

# 소개
### 관심사
> 연사님의 관심사. 어떤 개발 키워드를 중요하게 생각하시는지 공유하고자 기록함.

- 지속 가능한 소프트웨어 시스템 개발(OOP) / 개발자 역량 증대
- Java, TDD, Design Patterns, Refactoring, DDD
- Clean Code / Architecture, Code Review, Agile(Lean) Development
- MSA, EDA
- 개발 문화 개선
- 개발자 성장, 코칭

# 목차
- 왜 코드 리뷰를 해야하나?
  - 우리가 살고 있는 시대
  - 개발생산성 / SW 공학의 특성 / 장인정신
  - 코드 리뷰의 정의 / 목적
- 코드 리뷰의 절차
- 왜 코드 리뷰가 어려운가
- 기법들
  - 효율적인 PR 방법
  - 효율적인 리뷰 방법
  - 피드백 방법
  - 교착상태 시
- 추가적인 사례
  - 코드 리뷰를 하는 아주 재미있는 방법
- 부록 - 코드 리뷰 문화 정착의 어려움 / 극복방법
- 부록 - 코드 리뷰를 잘 하기 위해 필요한 기술들

# 왜 코드 리뷰를 해야 하나?

<details>
<summary>펼쳐보기</summary>
<div markdown="1">

## 우리가 살고 있는 시대
#### “Software is eating the world”
- Marc Andreessen, 2011, WSJ (월 스트리트 저널)
- 소프트웨어에 의해 운영되는 제품과 서비스들의 영역이 늘어나고 있음
  - Borders(서점) vs Amazon, Blockbuster(비디오 대여점) vs Netflix
  - iTunes, Spotify, Pandora / Pixar, Disney / Skype / LinkedIn / Wal-Mart
- 오프라인 업체들을 온라인 업체가 대체를 하고있다. 이런 시대가 2011년부터 시작 됨.

#### 2016 4차 산업(세계 경제 포럼)
- ICT 융합으로 이루어지는 차세대 산업 혁명
  - Big Data, AI, Robot 공학, IoT, 무인 운송 수단, 3D Printing, 나노 기술과 같은 7대 분야에서의 새로운 기술 혁신
  - 하지만 제일 중요한것은 VUCA (부카)
  - ![VUCA](/images/220428/vuca.png)
  - 이 중에서 제일 중요한 것은 변동성
    - 변동성으로 인해서 우리가 알려진 방법으로 문제를 풀 수 있는 경우가 점점 줄어들고 있음. 
    - 우리가 알고있는 방법으로 문제를 해결했을 때 우리가 알수있는 것은 굉장히 적음. 
    - 그래서 이 변동성때문에 혼자만이 알고있는 방법으로 일을 하는것보다는 여러사람들이 협력을 해서 문제를 해결해야되는게 가치가 높아지는 세상이 됨. 
    - 이런 측면에서 코드리뷰가 변동성을 해결해주는 방법중에 하나라고 할 수 있다.

#### Build 2021 Keynote - Satya Nadella (MS CEO)
- Global GDP(전체 산업 영역)에서 Tech(IT)의 비율 
  - 2020: 5% → 2030: 10% 
  - 주목할 만한 것은 나머지 90%. DT (Digital Transfomation)는 이제 시작임
- 지난 2년 동안 Non-Tech 영역에서 개발자 수 증가속도가 Tech 영역에서보다 가파름 
  - 농업(+65%), 소비재(+41%), 에너지(+52%), 금융(+42%), 웰빙(+76%), 리테일, 헬스케어, 자동차 등 
  - ex. 자동차 
    - 기계공학도보다 소프트웨어 공학자를 35% 더 채용
- 개발자 수요가 점점 늘어나고 있다.
- 미국의 총 인구 대비 개발자 수와 한국의 총 인구 대비 개발자 수를 비교했을 때 한국의 개발자 수가 4배 부족하다. 
  - 미국은 그 많은 개발자가 있는데도 세배정도 늘어야 원활하게 IT가 돌아갈 거라고 한다. 
  - 우리나라는 12배가 더 늘어야 한다. 그래서 지금같은 개발자 부족 현상이 나타나는 것.

#### 비즈니스 성공을 위한 개발의 역할
- 시장은 VUCA 해야하고 
- 비즈니스는 더 빨리 혁신해야하고 
- 개발은 DRFR 해야한다. 
  - Deliver SW Rapidly, Frequently and more Reliably (SW를 빠르고 더 자주 더 안정적으로 출시해야한다.)
  - CICD가 이루어졌다고 출시가 안정적으로 되는것은 아니다. 테스트가 잘 되어야하고 퀄리티가 굉장히 좋아야만 한다.
- 개발 조직의 성능(생산성)이 중요해지고 있다.

## 개발 생산성

#### 출시별 개발 리소스 증가
- ![출시별 개발 리소스 증가](/images/220428/img1.png)
- 출시가 진행될수록 개발 리소스(engineering staff)는 증가한다

#### 동일 기간별 생산성
- ![동일 기간별 생산성](/images/220428/img2.png)
- 어느정도 출시가 되면 생산성이 더이상 증가하지 못하고 수렴하고있다.

#### 출시가 증가함에 따른 라인당 개발 비용
- ![출시가 증가함에 따른 라인당 개발 비용](/images/220428/img3.png)
- 출시가 증가하면서 라인당 비용이 계속 늘어나게 된다. 여덟번째 출시때는 첫번째 출시에 비해 40배가 늘어난다.

#### 출시별 생산성
- <img src="/images/220428/img4.png" alt="출시별 생산성" width="320px"/>
- 첫 출시때는 만드는 것이 다 산출물이다.
- 그 다음부터는 맨 땅에서 기능을 만드는게 아니라 기능을 수정하면서 진행된다. 
- 그러면서 점점 생산성이 떨어지고 여덟번째 출시쯤 되면 생산적인걸 하는게 아니라 기본 코드를 파악하고 약간 수정하는데 대부분의 시간을 보낸다.

#### 개발 생산성
- ![개발 생산성](/images/220428/img5.png)
- 출시횟수가 증가하면서 생산성이 떨어지는걸 설명할 수 있는 그래프
- 주황색 라인은 좋은 설계일 때 누적 생산성
- 파란 라인은 설계가 나쁠 때 (설계가 나쁠 때를 설계가 없는거라고 한다)
- design payoff line (설계 수익 라인) 밑으로 보면 나쁜 설계가 오히려 생산성이 좋다.
- design payoff line을 지나면 좋은 디자인이 아니면 생산성이 증가하지 못하고 수렴한다.
- 설계 수익 라인 아래에서는 일정을 당기는 것이 의미가 있을 수 있는데 설계 수익 라인을 지나면 우리는 반드시 개발의 품질을 올려서 생산성이 저하되는 것을 막아야한다.

## SW 공학의 특성
- 소프트웨어는 굉장히 많은 부분을 건축공학과 비교를 하고 있다.

#### 공학 (일반적인 공학)
- 공학 = 설계(Design) + 빌드(Build)
  - 설계: 예측하기 어렵고, 급여가 비싸고 창의적인 사람들을 필요 
    - 건축학과 졸업하고, 건축 자격증 있는 사람들 
  - 빌드: 좀 더 예측하기 쉬움 
    - 전문적인 교육을 안 받고 경험이 많은 분들이 잘 할 수 있다. 
- 설계와 빌드가 분리됨 
- 빌드 비용이 비쌈(건축 90%)
  - 아무리 건축과 나온 분들의 연봉이 높다고 해도 전체 건축 비용의 90%는 빌드이다. 
- 유지보수 비용이 상대적으로 낮음 
  - 건축물이 완공 된 이후에 굉장히 사소한 것도 변경해달라고 할 수가 없다. 조금 불편하고 부족해도 그대로 살아야 한다. 
- 공학 활동의 최종 목적 
  - 빌드할 수 있는 어떤 종류의 재생산 가능한(Reproducible) 문서 
    - 문서만 있다면 누가 빌드하던지 동일한 결과물이 나옴

#### SW 공학
- SW 공학은 UML등 문서를 보고 구현을 하는데 항상 동일한게 나오는가? 아니다. 
- SW에서 항상 동일한 결과가 나오는 기술 문서는 무엇일까? 
  - 코드. 
- SW 공학의 설계와 빌드 
  - 설계 = 완전한 소스 코드 
  - SW 빌드 = 컴파일 
  - SW에서는 설계비용은 어마어마하게 비싼데 빌드 비용은 거의 무료다. 빌드는 인건비가 발생하지 않으니까.
- 좋은 설계 ~= 클린코드 
- SW 엔지니어: 설계를 잘하는 사람 → 코드를 잘 작성하는 사람 
  - 이 코드는 그냥 돌아가는 코드가 아니라 되게 좋은 설계를 가지고 있는 코드

#### 클린 코드의 중요성
- SW의 진정한 비용 ~= 유지보수(전체의 80% 이상)
  - 새로운 코드를 작성하는거는 전체의 20%도 안된다. 
  - 우리는 항상 남의 코드를 읽고 그걸 변경하는 것을 더 많이한다. 
  - 완전히 새로운 코드를 넣는 것은 그렇게 많이하지 않는다.
- 한번 작성한 코드는 10번 이상 읽음. 작성 보다 이해에 10배의 노력 소요 
  - 코드를 읽고 이해하는데는 100배의 노력이 드는 것.
- 90% 이상의 시간을 어떤 코드를 이용하는데 사용함 
  - 변경하는덴 1분도 안걸리는데 이해하는데 2시간 넘게 걸리는 일은 흔하게 일어난다. 
  - 남이 작성한 코드라는게, 2주 전에 내가 작성한 코드인데도 남이 작성한 코드처럼 보이는 경우가 있다. 
 
#### SW 개발의 단순한 진리 
- “The only way to go fast, is to go well” - Robert C. Martin 
  - 보통 “이번에는 일정이 중요하니까 좋은 설계를 할 수 있더라도 일단 빨리만들자” 라고 얘기를 하는데, 그렇지 않다. 
  - 빨리 갈 수 있는 유일한 방법은 잘 가는거지 더티하게 가가지고는 도저히 빨리 갈 수 없다. 
- 시간이 흘러도 생산성 저하, 비용 증가를 막을 수 있는 유일한 방법 
  - 이번에만 지저분하게 가겠다. → 잘못된 생각 
  - 이번에만 설계를 덜 하더라도 빨리가야겠다라고 생각하는 사람들은 
    - 좋은 설계라는것은 개발자에게 동기부여하고 리텐션하기 위해 필요한거지 사업에는 도움이 안되는 거다라고 생각하는 경향이 있다고 한다. 
    - 좋은 설계가 있을 때 사업에 어떻게 도움이 되는지 잘 설명할 필요가 있다. 
- SW 품질에 신중해야 
  - SW 비용과 품질의 관계는 비정상적, 비직관적이다.
    - 핸드폰의 경우 비싼게 품질이 좋다. 
    - SW는 비용이 많이드는게 품질이 좋은가? 그렇지 않다. 
  - 좋은 설계를 가지면 향후 변경 비용을 낮춤으로써 익숙한 트레이드오프를 역전시킴 
    - “높은 품질의 제품은 비싸다” 라는 일반적인 관념을 뒤집는다. 
  - 개발자의 전문가 정신 ? 비즈니스 혁신 ? 
    - “우린 도저히 지저분한 코드를 용납할 수 없어요. 우리한테 코드를 잘 작성할 수 있게 시간을 주세요.” → 이렇게 얘기하면 백이면 백 진다. 
    - 반드시 재무적인 지표, 사업에 어떤 좋은 영향을 미치는지를 가지고 “비즈니스에 혁신하는데 이렇게 이렇게 도움되는 일을 하는거에요”라고 말해야만 가능하다고 한다. 
    - ex. “테스트 커버리지를 높이고 싶어요” 
      - 이 얘기만으로는 일정을 받을 수 없다. 
      - 테스트 커버리지가 높아졌을 때 결합률이 줄고요, 변경요청이 왔을 때 좀 더 빨리 할 수 있어요. 그래서 출시하는데 시간을 줄일 수 있어요. 
      - 이렇게 비즈니스적으로 원하는 대답을 가지고 가야지, 개발자들이 추구하는 것만 가지고 얘기하면 소통하기 어려울 수 있다.

## SW 장인정신

#### 애자일
- VUCA 시대에 더 좋은 SW 개발 방법론
  - 이 얘기에는 공감을 하지만 애자일이 실패하는 경우를 굉장히 많이 봤다. 
- 단순 절차 변경 ? 개발 역량 ? 
  - 애자일이 실패하는 경우는, 단순히 프로세스만 변경하려고 하기 때문이다. 
    - 스크럼 미팅을 했다, 조직을 스쿼드로 만들었다 등 이러한 절차만 강요. 
  - 거기서 빠진 것이 애자일에 대한 개발 실천 역량이다. 
    - TDD, 리팩토링, 자동화된 테스트, 단순한 설계등에 대해서는 컨설턴트분들은 절대 얘기하지 않는다. 
    - 그래서 대부분 잘 안된다.

#### 장인정신
- 지식과 경험의 공유만이 전문성을 갖춘 개발자 육성 
  - 학교에서 못배운 지식과 경험을 업무 수행을 통해서 선후배간에 공유를 하면서 개발자를 육성하는게 유일한 방법이다.
- 후배들에게 지식과 경험을 공유(도제관계)하는 것이 장인정신이다. 
- 원래 애자일이 있고, 애자일을 조금 확장한 개념으로 장인정신을 얘기한다. 그런 면에서 장인정신이 굉장히 중요해지고 있다. 
- [소프트웨어 장인](https://book.naver.com/bookdb/book_detail.nhn?bid=9585753) 
- 장인정신에서는 공유활동을 굉장히 중요하게 생각한다.

#### 코드리뷰
- 개발자가 지금부터 당장 행할 수 있는 공유 활동 
  - 처음부터 완벽하게 잘하려고 하면 굉장히 어렵겠지만 아주 쉽게 접근하면 누구나 내일부터 할 수 있다. 
- Code SNS 댓글 놀이 
- 배움을 주고 받으며 지속가능한 SW 개발자가 될 수 있는 실천법

## 정의
_“Code review is a software quality assurance activity in which one or several people check a program mainly by viewing and reading parts of its source code, and they do so after implementation or as an interruption of implementation.”_
- 한 명 또는 여러 사람이 주로 소스코드 일부에 있는 내용을 보고 읽는 방식으로, 프로그램을 확인하는 소스코드 품질 보증 활동으로써 구현 혹은 구현을 잠시 중단하면서 시행한다. 
- Peer Reviews, Pull Requets, Merge Request 라고도 불린다.

## 목적
- 주목적: 품질 문제 검수(버그, 장애)
  - 주 목적만 가지기엔 아쉽고 더 나은 코드 품질을 위해서도 목적이다. 
- 더 나은 코드 품질: 아키텍처 속성 개선을 위한 코드 개선 
  - 향후 변경 비용이 개선돼서 비즈니스 비용을 낮출 수 있다. 비즈니스에 좀 더 이바지할 수 있다. 
- 학습 및 지식 전달: 코드, 해결책 등과 관련된 지식 공유에 기여 
  - 공유(주고 받는 학습)를 통한 역량 증대 및 성장 
    - 잘하는 사람은 못하는 사람한테 알려줄 수 있지만 못하는 사람은 잘하는 사람한테 무엇을 알려줄 수 있느냐? 
      - 항상 배우는 것은 주고 받는 거라고 생각한다. 
    - 대개의 경우 리뷰어들도 리뷰 과정에서 지식을 얻게 됨(하드스킬, 소프트스킬)
      - 주니어(Peer)끼리 코드리뷰를 하게되면 하드 스킬(기술에 관련된 스킬)에 대한 얘기를 하게 될 것이다. 
      - 시니어가 주니어에게 알려주게되면 하드 스킬을 알려주게 되지만 시니어 본인은 무엇을 배울 수 있냐면 
        - 내가 어떻게 대해야 어떻게 소통을 해야 저 사람이 잘 받아들일 수 있느냐 하는 소프트 스킬을 배우게 된다. 
        - 친절함, 공감능력, 가르치는 방법 등 거의 리더쉽에 대한 방법들. 
  - 동기부여 
    - 남들이 하는 것을 본다. 잘하는 사람 것을 볼 수가 있다. 
    - 대부분의 사람들은 잘하는 사람 것을 보면 잘하고 싶은 마음이 생긴다. 
- 상호 책임감 증대 
  - 집단 코드 오너십 및 결속 증대 
  - 내가 하고 있는 일에 관심을 가져주는 것 
  - 팀에서 일어나는 일 공유. 내 동료는 무엇을 하나? 이런 행위를 하면서 팀웍이 생긴다. 
- 설계 개선 제안 
- 개발 문화 개선

</div>
</details>

# 코드 리뷰의 절차
![코드 리뷰의 절차](/images/220428/img6.png)
- 저자(Author)
  - 코드 작성, 리뷰 요청
- 리뷰어
  - 코드를 읽고
  - 머지 가능한지 결정
- 변경 내역(Change List, PR)
  - 리뷰 시작 전에 작성
  - 저자가 머지를 원하는 소스 코드에 대한 일련의 변경(잘 한것, 아쉬운 것, 눈여겨 볼 것)에 대해 기술

#### 좋은 Pull Request 예
![좋은 PR 예](/images/220428/img7.png)

# 왜 코드 리뷰가 어려운가?
- 저자
  - 본인 생각에 멋지다고 생각하는 PR을 보냄
- 리뷰어 
  - 왜 멋지지 않은지에 대한 장황한 이유를 작성 
  - “In aviation, for example, people who greatly overestimate their level of skills are all dead” 
    - 자신의 기술을 과대 평가한 항공사들은 다 죽었다. 
    - “내가 너보다 훌륭한 개발자야” 라는 마음으로 접근하면 문제가 된다. 
- 코드에 대한 비판을 자신에 대한 비판으로 이해 
  - 처음에는 잘 안되는데 그부분을 분리해서 유체이탈을 해야한다. 
- 코드리뷰는 
  - 지식 / 공학적 결정을 공유하는 기회 
  - 공유(잘한 것, 아쉬운 것)를 통해 서로의 지식/경험을 나누며 상호 학습을 통한 역량 증대 수단 
  - 코드 토의를 개인적 공격으로 받아들이면 물거품 
    - 자기가 작성한 코드를 감추려하고 리뷰를 안올린다던가 리뷰를 할 때 안보이게 하려고 노력을 한다던가 하면 안된다. 
- 생각을 글로 전달하는 것에 대한 어려움 
  - 오해의 위험이 큼(음성 톤, 표정의 부재)
    - 그 글을 읽고 충격을 받는 사람이 있을 수 있다. 그 부분을 잊지 말아야한다. 
  - “이정도까지 얘기해줘야하나 이정도는 다 알텐데” 라고 생각하고 어려운 것만 얘기한다. 그러면 아무도 못 알아듣는다. 
  - “다 모른다는 마음으로 생각하자” 하면 전달하는데 도움이 된다. 
  - 리뷰를 만들고 코멘트를 줄 때도 처음엔 잘 하기 어렵다. 자꾸 하면서 사소한것부터 얘기하고 점점 잘하는 쪽으로 가면 된다. 
- 피드백을 조심스럽게 표현하는 것이 더 중요 
  - “You forgot to close the file handle” → “I can’t believe you forgot to close the file handle! You’re such an idiot”로 받아들임.

#### 처음 코드 리뷰를 했을 때
- 금요일 오후 svn commit을 조사하며 리뷰 
- 불러서 깨기. 불화 / 갈등 
- Git의 등장 
  - Local Branch에 commit 단위 리뷰할 수 있도록 
  - SNS 댓글 놀이

# 기법들1 - 효율적인 PR 방법
- 지루한 작업은 컴퓨터로 처리 
- 스타일 가이드를 통해 스타일 논쟁을 해소 
- PR을 올릴 때 주석 달기 
  - 리뷰어들보다 자신이 먼저 주석 달기 
- 모두를 포함하라 
  - “난 저사람에게 리뷰를 받고싶어” 하지 말고 팀이 있으면 가급적 팀 사람들 모두를 포함하는게 좋다. 
- 의미있는 커밋으로 분리 
  - 리뷰가 필요한 것, 리뷰가 필요하지 않은 것으로 커밋을 분리

#### 지루한 작업은 컴퓨터로 처리
- 코드를 읽는 것은 인지적 부담이 되는 고수준의 집중이 요구되는 작업 
  - 컴퓨터가 할 수 있는 일에 이런 노력을 낭비하지 말라 
  - 심지어 기계가 더 잘 할 수 있는 일에 
    - 빌드, 테스트, 머지 컨플릭트 찾는거, 정적 분석 (중복 찾고 등) IDE 좋은거 너무 많다. 
    - 사람은 로직만 잘 볼 수 있게 
- Formatting Tool 
  - 공백, 들여쓰기 오류 등 
    - 약속되지 않은 포맷팅, 자기가 모르는 포맷팅으로 리뷰가 올라오면 굉장히 힘들다고 한다. 
    - 옛날에 IBM이나 MS는 코드리뷰를 올리면 어떤사람은 포맷팅만 먼저 해서 리뷰어한테 올렸다고 함. (포매팅만 하는 사람들이 따로 있는 것)
    - 팀에서 정한대로 잘 해서 올릴 것. 
  - 별도의 커밋/PR로 분리. 리뷰 불필요를 기술해서 리뷰를 생략할 수 있도록 
    - 만약 포맷팅이 많이 어그러진 코드가 있으면 별도의 커밋/PR로 분리한다. 
      - “이거는 그냥 포맷팅만 한거다. 리뷰하실 필요 없다.” 
      - “A패키지에 있던거를 B패키지로 옮겼다. 리뷰하실 필요 없다.” 등으로 작성하면 리뷰어의 시간을 많이 절약할 수 있다.
- unused import, declaration 
  - “코드 리뷰에 unused import나 declaration에 대한 리뷰가 종종 보이는데, IntelliJ inspection을 error(원래 warning) 설정하면 더 빨리 인지할 수 있지 않을까? 라는 잼난 상상을 해봤습니다.”
  - ![unused import](/images/220428/img8.png)
  - error가 발생하면 해결되기전까지 PR을 할 수 없다.

#### 스타일 가이드를 통해 스타일 논쟁을 해소
- 스타일에 대한 논쟁은 리뷰에서 시간 낭비 
  - Option1: Adopt an existing style guide 
    - 구글 등 어디든지간에 좋은 스타일 가이드가있으면 가져다 써라 
  - Option2: Create your own style guide incrementally 
    - 아니면 당신의 조직의 스타일가이드를 한번에 다 만들 순 없으니 점진적으로 만들어 가라 
  - Option3: The Hybrid approach 
    - 아니면 위 option1, option2를 모두 적용해라.

#### PR을 올릴 때 주석 달기
- PR을 저자가 먼저 읽어보고 → 리뷰어들을 위한 설명을 커멘트로 남겨서 → 리뷰어들의 시간을 절약할 수 있게 하라
- ![주석 달기](/images/220428/img9.png)
- 만약 코멘트가 없었다면 그냥 중요하지 않은 부분이라고 생각하고 넘어갈 수도 있다.

#### 리뷰어에 모두를 포함하라
- 많은 사람들이 볼 수록 버그를 더 찾아낼 수 있다 
- 많은 사람들이 본다는 것을 알면 사람들은 대개 더 잘하려는 경향이 있다. (코드 / PR 작성)

#### 의미있는 커밋으로 분리
- 혼자하는 코드 리뷰도 좋다.
- ![의미있는 커밋](/images/220428/img10.png)
- 자잘한 커밋들이고 한번에 묶어서 커밋할 수 있지만 나눠놓아야 나중에 리뷰할 때도 편하다.

# 기법들2 - 효율적인 리뷰 방법
- 리뷰는 즉시 시작 
- 고수준으로 시작, 저수준으로 내려가라 
- 예제 코드 제공에 관대해라 
- 리뷰의 범위를 존중하라 
- 태그를 활용 
- 한두 등급만 코드 레벨을 올리는 것을 목표로

#### 리뷰는 즉시 시작
- 코드 리뷰를 높은 우선순위로 
  - 저자는 리뷰 종료될 때까지 대기(Blocked)하는 경우가 생길 수 있음. 빨리 리뷰를 종료해줘라. 
- 리뷰를 바로 시작하면 선순환됨 
  - 요령이 생김 
  - 코드를 읽고 피드백을 줄 때는 시간을 가지고 진행해도 되지만 시작은 바로 해라 
  - 이상적으로는 수 분 내에 
- 리뷰 라운드의 최대 시간은 하루 
  - 우선순위 높은 업무로 1일 내 불가하면 다른 리뷰어 지정 
  - 월 1회 이상(case by case) 재지정을 해야한다면 속도를 줄여서 건강한 개발 관습(Practices)을 유지할 수 있어야 함.
- Agile pull requests by Mark Seemann 
  - “If it hurts, do it more often” 
    - 어려우면 더 자주 더 익숙해질때까지 해라 
  - 아침 스탠드 미팅에 익숙 
    - 매일 아침 30분, 점심 식사 후 30분을 리뷰를 위해 미리 확보 
  - PR에 포함된 변경이 적도록 노력 
    - 반나절 정도 작업한 양 정도여야 30분안에 리뷰어들이 리뷰를 할 수 있다. 
    - 모든 팀원들이 하루에 두번 작은양의 PR을 리뷰할 수 있고 최대 4시간 안에 리뷰가 완료될 것 
  - 근본적인 문제는 사람들이 리뷰할 시간이 없다고 느낀다는 것임 
    - 당신의 ‘개인 기여’로만 평가를 받고 있다면, 팀을 돕기 위해 수행하는 모든 일은 시간 낭비처럼 보임 
    - 이것은 리뷰를 하는 것의 문제라기보다는 조직적인 문제임
- Pull Requests vs Pair Programming 
  - 트레이드오프: Latency or throughput? 
    - pull request는 latency가 있다. 오전30분 오후 30분 하더라도 4시간 latency가 있는것임. 
    - pair programming은 latency가 없다. 굉장히 빠르게 피드백 루프가 돌아간다. 
      - throughput을 보면 PR은 한명이 한 것을 여러명이 보기때문에 성과가 좋다고 볼 수 있다. 한 명이 여러사람을 리뷰할 수도 있고. 
      - 하지만 Pair programming은 1:1이기때문에 throughput은 PR이 더 좋다. 
  - 내성적, 사색, 비동기 
    - 사람들 성향이 내성적이면 PR이 낫다. 
  - 외향적, 친밀한 개인적 상호 작용 
    - Pair programming이 더 낫다. 
  - 절대 답은 없음. 앙상블(섞어서) 방식도 좋다.

#### 고수준으로 시작, 저수준으로 내려가라
- 리뷰 라운드에서 많은 의견을 남길 수록, 저자가 당항활 위험 커짐 
- 하나의 라운드에 20~50개 정도의 의견은 위험의 시작 
- 초기 라운드에서는 고수준 피드백으로 제한 
  - 버그, 장애, 성능, 보안 등 
  - Extract Method, Composed Method, Invert-if(복잡도) 등 
- 고수준의 피드백이 처리된 후에 저수준 이슈를 처리
  - (선택적인)설계 개선 
  - 변수명 변경, 주석을 명확하게 하는 것 등

#### 예제 코드 제공에 관대하라
- 저자를 기분좋게 하기 위한 방법 
  - 리뷰 중에 선물 주기(코드 예제)
- 너무 긴 예제는 관대한 것이 아니라 억압적으로 보임 
- 라운드당 2~3개의 코드 예제로 제한 
  - 모든 PR에 예제를 제공하면 저자가 코드를 작성할 수 없다고 생각한다는 신호

#### 리뷰의 범위를 존중하라
- 자주 보이는 Anti-Pattern 
  - PR 근처의 코드를 보고 저자에게 수정을 요청
  - ![out of scope](/images/220428/img11.png)
- Rule of thumb 
  - PR에 포함되지 않은 라인은 리뷰 범위가 아님 
- 예외: PR이 둘러싼 코드에 영향을 미칠 때
  - ![in scope](/images/220428/img12.png)

#### 태그를 활용
- \[Nit]
  - nitpick 
  - ‘고치면 좋지만 아니어도 그만’을 의미. 
  - 그래도 보통 고침 (삐멜 on Twitter )
  - 결함이 아니어도 리뷰어는 항상 더 개선할 수 있는 의견을 자유롭게 남길 수 있어야 함. 
    - “이거는 장애랑 무관하고 이사람이 절대로 이정도까지 할 수 없는 사람이니 이런 말을 하지도 말아야 돼”가 아니라 
    - 이걸 할 수 없는 분이어도 “이런것도 있어요 나중에 시간되면 한번 보세요” 하면 좋다. 
  - 중요치 않다면 “Nit”를 태그로 남겨서 저자가 무시할 수 있도록 할 수 있음 
  - 교육적인 목적, 지속적으로 기술을 연마하는것을 돕는 목적 
  - 예 nit: null 대신 Optional을 쓰면 어떨까요?, OCP 준수를 위해 Strategy 도입은 어떨까요?

#### 한두 등급만 코드 레벨을 올리는 것을 목표로
- D등급의 PR을 받으면 저자가 C나 B등급을 받도록 도와라 (강제가 아니라 도와라)
  - D등급(간신히 돌아는 가는데 엉망인 코드)를 A+등급인 리뷰어가 리뷰하게되면 어마어마하게 쏟아낼 수도 있다. 그러면 D등급은 충격을 받게 된다. 
  - Letter Grade 
    - 굉장히 중요하다. 
  - 완전하지는 않아도 충분히 좋은 코드가 되도록 
  - F 
    - 기능적으로 틀렸거나 
    - 너무 복잡해서 머지했을 때 정확성에 확신이 없는 상태 
  - 승인을 보류하는 유일한 이유 
    - 수 차례의 리뷰 라운드 후에도 코드가 F 상태인 경우

# 기법들3 - 피드백 방법
- 절대 “너”라고 하지 마라(너는 왜 맨날…)
- 건설적인 피드백을 하라 
- 진정한 칭찬을 해라 
- 피드백은 명령이 아니라 요청으로 표현해라 
- 의견이 아니라 원칙에 기반하여 피드백해라 
- 반복적인 패턴에 대해서 피드백을 제한하라

#### 절대 “너”라고 하지 마라(너는 왜 맨날…)
- 리뷰의 핵심 
  - “무엇이 코드를 나아지게 하는가” 
  - “누가 그런 아이디어(잘못)를 냈는지”가 아님 
- 저자의 방어 유발을 최소화하는 방법으로 피드백 
  - 비판의 대상은 코드. 저자가 아님 
  - “너”: 저자의 주의를 코드에서 자신으로 바꿈 
- “너”만 빼라(저자에 대한 판단 → 단순한 정정)
  - “You misspelled ‘successfully’” → “sucessfully → successfully” 
  - I Message 대화법: 행동 - 결과 - 감정 
    - “너의 어떤 행동이 나와서 **내** 감정은 이래.” 라고 얘기하면 “아 저사람이 이래서 기분이 나쁜거지”라고 생각하지 “저사람이 나한테 욕하는구나”라고 생각하지 않는다.
  - ~하는 것을 제안합니다. ~하는게 어떨까요? ← 오픈커뮤니케이션 
    - 물어보면 대답함. 안한다고 대답해도 되고

#### 건설적인 피드백을 해라
- 동료들 간의 코드 리뷰 
  - 경쟁 유발(X)
  - 팀의 생산성을 높이는 것(O)
- 코드 리뷰를 자신의 코드에 대한 비판이 아니라 학습의 과정으로 인지하면 전체적인 프로젝트의 성공에 기여함 
- 건설적인 피드백은 개발자들이 그들의 실수에서 배우고 역량을 증대하도록 동기부여함 
  - 실수 안하면 배울 수 없다. 실수를 안하는것은 맨날 자기가 아는 방법만 쓴다는 것. 손가락은 빨라질 수 있는데 실력이 좋아지진 않는다. 
- 건설적인 피드백을 못하겠으면 차라리 아무 말도 하지 마라

#### 진정한 칭찬을 해라
- 대부분의 리뷰어가 잘못된 부분에만 집중 
  - 하지만 리뷰는 긍정적 행위 강화를 위한 값진 기회이기도 함 
- PR에서 좋은 변경이 있을 때마다 
  - “오 이런 API가 있나요. 정말 유용해요” 
  - “정말 좋은 해결책이네요. 생각도 못 했네요” 
  - “함수를 분리한 것은 좋은 생각이에요. 훨씬 단순해졌어요” 
- 저자가 주니어 혹은 신규 입사자라면 리뷰에 매우 민감하고 방어적일 수 있음 
- 진심어린 칭찬은 리뷰어가 잔인한 감시자가 아니라 도와주려는 팀동료라는 것을 보여서 이런 긴장감을 낮춤

#### 피드백은 명령이 아니라 요청으로 표현해라
- 일상에서 동료에게 명령하지 않음 
  - 명령형(How): “12번 테이블 자리가 비어있습니다. 우리 가족은 저 자리로 걸어가 앉을 겁니다.” 
  - 요청(What): “4명 앉을 자리 부탁해요.” ← 이렇게 선언형으로 요청. Tell, Don’t Ask 
- 하지만 리뷰에서는 강압적인 명령이 종종 발견됨 
  - ex. 이 클래스를 별도의 파일로 분리하라 
    - 이 클래스를 별도의 파일로 분리할 수 있을까요? 
    - 이 클래스는 너무 커지는 것 같은데 괜찮을까요? ← 나의 걱정 
      - 이게 베스트. ‘분리’라는 말을 안했음. 저자는 분리해야겠다는 것을 스스로 발견하게 됨
- ![요청](/images/220428/img13.png)

#### 의견이 아니라 원칙에 기반하여 피드백하라 (“그냥 내눈에 꼴보기 싫으니까 바꿔”가 아니라)
- 저자에게 의견을 줄 때는 
  - “제안하는 변경”과 “변경의 이유”를 모두 설명하라 
  - ex. 이 클래스를 2개로 분리해야해요 
    - 지금 이 클래스는 파일 다운로드와 파싱의 2가지 책임을 가지고 있어요. 다운로더와 파서 2개의 클래스로 분리하여 SRP를 준수하는 것이 어떨까요? 
- SW는 과학인 동시에 예술 ??? 
  - 항상 원칙에 기반하여 정확히 뭐가 잘못되었는지 언급할 수 있는 것은 아니다 
  - 단지 그냥 보기 싫거나 직관적이지 않을 수 있다 
  - 무엇을 할 수 있을지 객관적으로 설명하라 
  - ex. 이 코드는 혼란스럽네요(**너**가 이 코드를 혼란스럽게 작성한 것 같아.) → **나**는 이 코드를 이해하기 어렵네요 (I Message)

#### 반복적인 패턴에 대해서 피드백을 제한하라
- 저자의 실수가 동일한 패턴임을 식별했다면 모든 경우를 언급하지는 말라 
  - 로그를 10군데 안남겼는데 10군데 다 얘기해주지 말아라 
- 동일 패턴에 대해서 2~3개 정도의 예를 언급하라 
  - 저자가 만약 깨달았으면 10군데를 고칠것이다 
  - 만약 언급된 2~3개만 고쳤더라도 그럼 뭐 어떠한가. 시간이 지나면 점점 더 많이 고칠것이다. 
- 그 이상은 저자에게 개별 사례가 아니라 패턴에 대해서 수정을 요구하라

# 기법4 - 교착상태 시
- 교착상태를 적극적으로 처리해라

#### 교착상태를 적극적으로 처리해라
- 교착상태로 향하는지 나타내는 표식 
  - 토론의 톤이 점차 팽팽해지고 공격적으로 됨 
  - 라운드당 커멘트가 줄어들지 않는 경향을 보임 
  - 너무 많은 커멘트에 저항이 보임
- 코드 리뷰의 최악의 결과는 교착상태(Stalemate)
  - 커멘트를 반영하지 않으니 승인 거부 
  - 저자는 커멘트 반영을 거부
- 만나서 얘기하라 
  - 화상 혹은 만나서 논의(특히 복잡한 리뷰)
  - 텍스트 기반 의사소통은 상대가 인간이라는 것을 잊게 함


- 인정하거나 Escalate하라 
  - 교착상태가 길어지면 관계가 나빠짐(퇴사)
    - 실제 google 사례 
  - 그냥 승인하는 비용(Agree to disagree - 갈등 해결책)
    - 나는 마음에 안드는데 그냥 넘어갈게 
  - 그런데 이렇게 저수준 코드를 무심코 승인하면 그 당시의 SW 품질이 잠깐 낮아질 수 있음 
  - 하지만 동료와 너무 다퉈서 한명이 퇴사하여 함께 일하지 않게 된다면 고수준의 품질을 얻을 기회가 영영 사라짐
- 인정이 불가한 경우 
  - 저자에게 논의를 팀장이나 테크 리더에게 Escalation 
  - 다른 리뷰어에게 할당 
- 교착상태로부터 회복 
  - 상황을 관리자와 논의하라 
  - 휴식을 가져라. 가능하다면 안정될 때까지 PR을 서로 보내지 마라 
  - 갈등 해결책을 학습하라 
    - 책 등을 보고 회피하지 말고 학습하라


- 설계 리뷰를 고려하라 
  - 코드 리뷰 때 설계 리뷰 때 논의되었어야 할 상황을 논쟁하는가? 
    - 설계 리뷰는 있었나? 이렇게 한번 확인해봐야 한다. 
- 아주 심각하지 않다면 
  - 그냥 인정하고 좋은 관계로 동료와의 협업을 지속해라 
  - Agree to disagree 
  - VUCA - 훌륭한 한 사람보단 조금 부족하더라도 여러 사람이 협력하는게 좋은 결과를 만들어낼 수 있다.

# 추가적인 사례 - 코드 리뷰를 하는 아주 재밌는 방법
1. PR을 작성한 사람과 짝 프로그래밍을 하며 어떻게 고치는게 좋은지 보여주고 
2. Revert 
3. PR을 작성한 사람이 스스로 개선할 수 있도록 기회를 주는 … 
   1. 20분 짝 프로그래밍 개선 / 2시간 스스로 개선 
   2. “그래야 스스로 하는 법을 배움”

- 결정은 저자가 
  - “완벽한 설계”가 아니라 “당신이 할 수 있는 최고의 설계”를 추구 - Letter Grade. 다 A+이 아니다. 
  - 팀 정신을 유지하기 위해 불완전한 해결책을 받아들여라 
    - 완전하기 위해서 죽자고 싸워서 한명이 이기는건 팀을 망가뜨리는 것. 
  - 모든 설계 결함이 항상 실제로 문제가 되지는 않음 
    - 대부분의 경우는 문제가 안되고 몇가지는 문제가 될 수 있다. 
- “코드 리뷰의 목적은 비난이 아니라 배움이다” 
  - 종종 리뷰어들도 배우게 됨 
- 리뷰하려는 코드가 그냥 나쁠 때가 있음 
  - 저자가 그날 무슨 일이 있을 수도 
  - “XXX님. 이 코드 샘플을 당신의 이력서에 추가해야 할까요?” 
    - 이런 농담도 괜찮을 것 같다(?) 약올리는.. 
  - 신규입사자, 경험이 부족한 팀원의 코드를 리뷰하면서 이런 상황을 만났다면 좀 더 안내하는 가르침으로 전환하라

# 부록 - 코드 리뷰 문화 정착의 어려움 / 극복방법
- 저자의 노력 
  - 리뷰어 n명의 시간을 절약 
  - 효과적인 리뷰 가능 
  - description 잘 달고, commit 잘 나누고, pr 사이즈 작게 유지하고, 자기가 만든 pr 자기가 먼저 읽어보고, 리뷰어를 도와줄 수 있는 comment가 있으면 comment를 달고 
- 리더의 관심과 의지 
  - 리더가 “PR같은거 하지 말고 빨리빨리 merge하세요.” 하면 정착되기 힘듦. 
  - 리더가 “이건 SW의 품질과 우리팀의 역량과 팀웍을 위해서 굉장히 중요해요” 라고 관심을 갖고 봐주는게 중요하다. 
  - 리더가 만약에 이런것에 대해서 잘 모르면 비즈니스적으로 설명을 해야한다. (비즈니스적으로 어떤 효과가 있다 등)
  - 가끔, 그러나 매우 자세히
- 코드 비난에 대한 두려움 
  - “나도 모르게 어제 바보같이 짠거를 우리 좋은 동료가 봐주는거야” 라는 태도로 해야한다. 
  - “이사람이 뭐라고 나를 이렇게 잔소리를하나” 라고 받아들이면 위험해진다.


- 멋져 보여야 잘 정착이 된다. 
  - 하고싶어짐. 그게 뭐든(Tool, IDE, Hotkey)
    - 제대로 하려면 자바라면 객체지향 원칙이라던가 디자인 패턴, 리팩터링 이런게 되어야 하지만 그게 아니어도 따라하고 싶어지면 그쪽으로 가는 사람들이 생긴다.
  - 따라 하고 싶어져야 
  - 연사 왈 : 지식 전달만 하면 지루해하고 예제 코드나 라이브코딩등을 하면 관심을 갖는다.


- How do you inspire your team to adopt that mentality(craftmanship, TDD, Pair Programming)
  - 좌절할 준비를 하라 
  - 당신이 원한다고 남에게 영감을 줄 수는 없다 
  - 당신은 당신 자신의 태도만 제어 가능. 타인이 나의 태도에 어떻게 반응할 지는 제어 불가 
  - 영감은 부산물(side effect) (영감이 목표가 되면 안된다.)
    - 내가 어떻게 하면 모범이 될 수 있을까? 
    - 특정 행동이나 특정 기술을 채택하도록 하려면 모범이 되어야 함 
      - 멋져 보여야 한다. 
    - 기술을 마스터 해야 함
  - 그러니 모범이 돼라 
    - 지각하지 말라. 업무에 기여하라. 긍정적으로 임해라. 사람들을 잘 대하라 
      - 이러면 내 말을 들을 확률이 더 높다. 소프트 스킬 
    - 기술적 훈련(Technical Discipline)에 대해 언급하려면 고도로 숙달되어야 함 
    - 키보드로 코딩을 할 때 사람들이 경악을 하도록 해라 
  - 이렇게 당신이 엄청난 모습을 보여주면 아마도 몇몇 사람들에게는 영감을 줄 수도 있을 것이다. 
  - 뭔가 좋은것을 우리 조직에 전파하고 싶다 → 그러면 당신이 잘 해라. 
    - 잘 하는 것에는 기술과 관련없는 소프트 스킬도 포함. (+ 착한 사람이 돼라)


- 우리는 새로운 것을 도입할 때 바로 좋아질것이라고 생각한다. 하지만 그렇지 않다.
  - ![valley of pain](/images/220428/img14.png)
  - 새로운 것을 도입했을 때 Valley of Pain에 빠진다. 
  - 그 정점에 다다랐을 때 “거 봐, 우리 조직은 안돼.” 이러고 포기하면 그 시간만 날린 것이다. 
  - “이건 될거야, 이건 분명이 되는거야” 하고 빠져나오면 기하급수적으로 상승한다.

# 부록 - 코드 리뷰 효과
- 예상하지 못한 버그를 타 프로젝트에서 발견하기도 
- 시간이 지나니 선플이 달리기 시작 
  - “코드가 깔끔하네요” 
  - 이렇게 구현하는 수도 있군요. 좋네요” 
- 많은 사람이 내가 작성한 코드를 본다는 생각에 PR 전에 한번 더 코드를 다듬게 됨 
- 좋은 설계, 아키텍처, 클린 코드, TDD 등에 대한 공감대/열정 형성 
  - 잘하는 동료를 보면 잘하려는 열정이 생김

# 부록 - 코드리뷰를 잘 하기 위해 필요한 기술들
#### 리팩터링
- ‘결과의 변경 없이 코드의 구조를 재조정함’ 
  - 주로 가독성을 높이고 유지보수를 편하게 
  - 버그를 없애거나 새로운 기능을 추가하는 행위는 아님
- [리팩터링 2판 (리팩토링 개정판)](https://book.naver.com/bookdb/book_detail.naver?bid=16311029)
  - 리팩터링의 효과 
  - 다양한 리팩터링 기법


- TDD와 연결된 리팩터링 
  - ‘돌아가는 코드를 가지고 설계를 하는 행위’ 
    - 이렇게 설계하면 이렇게 될거야 보다는 항상 돌아가는 무언가를 실행시키면서 개발하면 재밌다. 
  - 그린필드 프로젝트(아무것도 없는 상태)에서 분석/설계부터 시작하는 비율이 높으면 설계보다 리팩토링이 편하다.
- 코드리뷰에서 리팩토링 기술을 많이 언급한다. 
- 매일 리팩터링이 굉장히 중요하다. 
  - Continuous Renaming 
    - 매일매일 변수 이름이나 함수 이름을 바꿔라. 매일 매일 더 좋은 이름이 생각이 난다. 
  - Composed Method(Extract Method)
  - 응집도 높이기 
  - Discover Value Object


#### Legacy Code 다루기
- [레거시 코드 활용 전략](https://book.naver.com/bookdb/book_detail.nhn?bid=14032002)
  - 의존성 관리: Subclass & Override Method 
  - 테스트 추가: Characterization Test 
    - 로직을 이해하지 못하는 것에 대해서 테스트를 추가하는 방법 
    - 백명석님 유튜브 채널에 다양한 방법이 있다고 함
      - [백명석](https://www.youtube.com/user/codetemplate)
  - 새로운 코드 빠르게 추가: Sprout/Wrap Method/Class 
    - 기존 코드 수정 없이 새로운 코드를 추가하는 방법들 
  - 레거시 분석

#### Clean Code & TDD
- TDD 
  - 전통파(Classic) and(not vs) 런던파(London)
    - 상태 기반 전통파 
    - 인터랙션 기반 런던파 
    - [Unit Testing Principles, Practices, and Patterns](https://book.naver.com/bookdb/book_detail.nhn?bid=16239693)
  - Outside in → Inside out([Outside In TDD part I](https://www.youtube.com/watch?v=XHnuMjah6ps&t=9s))
- Clean Code 
  - [Clean Code](https://book.naver.com/bookdb/book_detail.naver?bid=7390287)
  - [Clean Coders : Level up your code.](https://cleancoders.com/)
  - [클린코더스 강좌](https://www.youtube.com/playlist?list=PLeQ0NTYUDTmMM71Jn1scbEYdLFHz5ZqFA)


# FAQ
- 코드 리뷰 자체가 중요할까? 
  - 코드 리뷰가 중요한거지 코드 리뷰 자체가 중요한건 아니다. 
  - 공유와 코드에 대한 논의를 할 수 있는 문화가 중요. 
- 개발 생산성 vs 개발 품질의 트레이드오프 
  - 시간 얘기를 많이한다. “코드 리뷰 좋은건 알겠는데요, 시간이 부족해요”. 이럴땐 생산성과 품질을 생각해봐라. 
  - 버그 수정 비용은 개발 라이프싸이클(개발, 테스트(로컬, 통합, 스테이지), 배포 등) 후반으로 갈수록 기하급수적으로 커짐 
    - 배포 후 버그를 수정하는 비용은 설계 단계에서 수정하는 비용보다 100배정도 비싸다. 
    - 그러나 설계나 개발 할때 시간을 만이 들인다면 (TDD, 리팩터링, 코드리뷰 등) 뒤에 가서 결함이 나올 확률이 줄어든다. 그럼 결코 시간이 많이 드는 작업이 아닐 수도 있다. 
  - 품질이 높으면 라이프싸이클의 후반으로  갈수록 시간이 절약됨 
  - 따라서 TDD, Test, Refactoring, Code Review 등은 생산성을 증대시킴 
  - 거기다 높은 품질은 “향후 추가 비용”을 감소시킴 
    - 이번 배포때만 생산성을 증가시키는게 아니라 다음 출시때 비용까지도 감소시켜준다.

# Q&A
- 우리는 이렇게 코드리뷰를 하는데 잘하는건가요? 
  - 자신들의 상태를 공유하고 피드백을 받아봐야 가능. 찾아가라 
  - 같은 회사 내나 같은 팀원들한테 받을 수 있으면 좋고, 아니면 다른 잘하는 사람 있으면 물어봐보면 된다. 물어봐보면 기분 좋아하신다. (“나한테 물어보러 사람이 오네”) with 커피 한잔
- 너무 기법/절차에 의지하지 말라 
  - 온오프를 적절히 섞어라. SKP 병풍 (SKP가 뭔지 모르겠음.)
    - 짝프로그래밍을 한다음에 너가 한번 해봐라 같은 것을 적절히 섞어라 
  - 툴(bitbucket, github upsource, …) ? 일단 사람의 눈에 잘 읽히는 코드인지가 중요 
- 좋은 줄은 아는데… 일정, 우선순위 
  - 코드 리뷰를 위한 일정을 따로 잡겠다. 이러면 문제가 되는거고, 코드 리뷰를 당연히 하는 걸로 일정을 여기면 된다. 
  - 우리는 시간이 정해진 시험에서 성적을 평가는 받는 것임 
  - 시간을 아끼는 가장 좋은 방법 = 저자의 노력
- 주기: 짧게 자주. 그러니 PR 사이즈 작게
- 꾸준히 코드리뷰를 진행하나 그럼에도 불구하고 조기에 발견될 수 있는 오류가 추후에 장애로도 발견되는 사례가 아직도 빈번히 발생. 어떤 부분을 놓치고 있는건지, 리뷰 문화를 정착할 때 가장 중요시되는 철학은 무엇이 있을까요? 
  - 리뷰를 한다고 100% 버그를 사전에 잡을 수는 없음. 소프트웨어는 수학이 아니라 과학임 
    - 틀린 경우가 없다는 것을 증명할 수 있는거지 맞다는 것을 증명할 수는 없다. 
  - 계속해서 리뷰하고 그게 누적되면 조직의 버그 사전 탐지율이 높아지는 거지 100% 안전하다고 할 수는 없다.

# 상사를 어떻게 설득하나?
- 측정 항목을 정해서 개선 효과를 측정하라 
  - [Accelerate](https://book.naver.com/bookdb/book_detail.nhn?bid=13747436)
  - 변경 실패율(change failure rate): 배포 했을 때 결함이 발생하는 빈도를 측정 
  - 장애 복구 시간(failure recovery time): SW가 정상적으로 동작하지 않는 시간 
  - 빈도(frequency): 상용 환경에 변경 사항을 출시하는 빈도 
  - 리드 타임(lead time): “아이디어 ~ 출시 가능한 SW” 까지의 시간 
- 의사결정권자들에게 중요한 것은 좋은 아키텍처, TDD 이런게 아니다. 
  - 요구사항이 얼마나 결함 없이 빨리 배포되었나가 중요하다. 
  - 이해 & 신뢰 구축 
- 작은 단위로 올바른 방향으로 나갈 수 있는 기회 찾기 
  - “테스트 커버리지를 높이겠다” 이렇게 얘기하면 안되고 → “품질/효율성 개선을 개선하여 비즈니스 지표를 이렇게 하겠다.” 라고 해야한다. 
- 허가가 필요한가? 
  - 자동화 테스트 작성, 리팩터링, 코드리뷰, 짝프로그래밍 등은 허가가 필요한 항목이 아니다. 
  - 결과를 잘 만들기 위한 수단이다. 우리가 무슨 도구를 쓸 지는 우리가 정하는 것. 우리 상사가 정하는 것은 아니다. 
  - 상사는 “무엇을, 왜, 언제까지”는 요청할 수 있다. 하지만 “어떻게”는 우리가 정하는 것.

# 광고
- 패캠 강의 
  - The RED: 백발의 개발자를 꿈꾸며 : 코드리뷰, 레거시와 TDD 
    - [The RED : 백발의 개발자를 꿈꾸며 : 코드리뷰, 레거시와 TDD by 백명석, 최범균](https://fastcampus.co.kr/dev_red_bcr)
    - 개발자는 왜 성장해야 하나? / 코드 리뷰 체크 리스트 / 레거시 코드 다루기 / 리팩터링 / TDD 
  - sudo: CTO’s Tech Talk 2022 컨퍼런스 
- [Youtube 백명석](https://www.youtube.com/user/codetemplate/videos) 


# 세미나 Q&A
- 회사 규모에 따른 코드 리뷰 방법들과 초기 → 성숙으로 갈 때 단계들도 궁금합니다. 
  - 팀이 조금 크면 팀 내에 같은 일을 하는 소그룹끼리 코드리뷰를 하게 되는 것 같다. 팀 → 타팀 → 관련없는 프로젝트 단계로 코드 리뷰를 가면 될 것 같다. 
  - 초기 → 성숙은 쉽다. 열개중에 한개만 되면 한개만 하면 되고 점점 늘리는 거다. 큰거로는 갈 수 있는데 처음에 큰거로 가는 거는 굉장히 위험하다. 한 번에 갈 수 있어도 열 번 정도로 나눠서 간다고 생각하면 적응하는데 도움이 될 것 같다. (베이비 시스템에서 시작)
- 저희는 Notion으로 코드리뷰를 하고 있어요. 이럴땐 어떻게 해야할까요? 
  - 이왕이면 side by side로 변경 전 후 코드를 같이 볼 수 있는게 가장 좋은 것 같고 웹이나 툴을 이용하는게 좋을 것 같다. 툴이 비싼데 인건비보다 비싸진 않을 것 같다. 사람 시간이 save 될 수 있게 투자를 하는게 좋은 것 같다.
- Non-tech 기업에서는 비전공자, 비개발자들이 조직에 있는 경우가 많은데, 이 경우는 어떻게 코드 리뷰를 하면 좋을까요? 
  - 관심으로 일단 시작하는거다. 우리는 비전공자고 비개발자니까 도전하지 말자고 하면 안된다. 부족하더라도 작은것부터 실천하세요.
- 깃허브로 리뷰를 진행하는데 리뷰어의 응답을 기다리다 지체되는 현상이 발생하는데 어떻게 하면 좋을까요? 
  - 팀에서 정할 수 있다. 오전 30분, 오후 30분. 하루가 넘어가면 리뷰 없이 배포를 해버릴 수도 있다. 이렇게. 
  - 그런데 리뷰가 없는채로 배포를 했는데 문제가 발생했다. 그러면 그 팀 전체가 책임을 지는 것. 
  - 리뷰를 못 받는 이유중에 가장 큰 것은 너무 한번에 많은 것을 리뷰 받으려고 하는 경우도 있다. 예를 들면 누가 1주일정도 작업한걸 금요일 다섯시에 주고 리뷰하라고 하면 그건 큰 욕을 한 것. 나는 퇴근할테니 너는 리뷰해. 
  - 저자는 생산자고 리뷰어는 소비자다. 생산자는 소비자를 생각해야한다.
- 경험하신 코드리뷰중에서 가장 좋았던 경험과 가장 나빴던 경험도 공유해주실 수 있나요? 
  - 좋았던 경험은 사내강의에서 했던 것을 코드리뷰에서 반영된 걸 보았을 때 
  - 나빴던 경험은 Nitpick 태그로 이런 것도 있어라고 알려줬는데 
    - 그랬더니 책을 주문하고 업무시간에 일을 안하고 책을 봄 
    - 업무시간에 공부 할수 있는데, 같은 프로젝트에 있는 사람들은 매우 힘들었음. 그사람때문에 일정이 펑크나니까 
    - 애석하지만 수학시험이 1시간짜리가 있는데 1시간안에 풀면 80점이고 2시간에 풀면 100점인데, 그럼 내점수가 100점인가? 아니다 80점이다. 
    - 내가 80점 맞는게 억울하면 시험시간 외에 공부해서 90점 100점 맞게 노력을해야지 시험 시간을 남보다 더 써서 100점 맞는건 반칙이다. 
    - 일정을 맞춰서 협력이 잘 일어나게 하는게 더 중요한거니까, 내가 부족해서 못하는것은 공부해서 다음번에 해야되는데 그걸 하겠다고 업무시간에 blocking을 하고있는 분을 봤을 때 힘들었다.
- 코드 구현시 주석을 어느정도까지 써야할까요? 또는 변수명을 짓는 법 궁금합니다. 디렉토리 구조를 어떤 식으로 가져가는 것이 좋은 프로젝트가 될까요? 
  - 굉장히 큰 질문. 
  - 주석 : 클린 코드에 나온다 
  - 변수 : 영원한 숙제. 의도를 드러내게 지어라. 이 말이 와닿으면 되는거고 
  - 디렉터리 구조 : 되게 많은 방법이 있다. 레이어드로 할 수도 있고 헥사고날도 있고 그거는 그 프로젝트에 맞게 학습하고 잘 맞는걸 찾아야죠. 정답이 없다.
- 코드리뷰의 성과를 측정할 수 있는 방법이 있을까요? (상급자에게 성과 보고를 하며 더 많은 지원을 받기 위함)
  - 변경 실패율, 장애 복구 시간, 빈도, 리드 타임을 측정해서 수치가 변하는 것을 보여줘야 한다. 
  - 개발자들은 “원래 이거를 세달만에 할 수 있는데요 리팩토링을 하려고 네달만에 할게요. 리팩토링을 하면 이러이러한게 좋아져요” 라고 한다. 그렇게 얘기하면 정말 좋아져야 한다. 
    - “리팩토링하면 버그가 줄어들거에요, 변경 비용이 줄어들거에요. 2주 걸리던게 1.5주 걸릴거에요” 라고 했는데 그럼 다음번에 정말 1.5주 걸려야 한다. 그러면 정말 지원을 받을 수 있다. 
    - 그런데 안짧아지고 그러면 신뢰가 깨진다. 
    - 상급자, 경영진이랑 약속을 할 때는 자신 있는 것 가지고 약속을 해야한다. 
      - 허락이 필요한 것과 필요하지 않은 것이 있다. 허락이 필요하지 않은 것까지 허락 받으려고 하지 않아야 한다. 
- 리뷰할 때 실제 실행도 해보곤 하는데요. 그러느라 시간이 꽤 걸리기도 하고요. 괜찮은걸까요? 
  - 실행까지 해볼 수 있으면 굉장히 좋은 리뷰이지만 실행하는데 10분~20분씩 걸린다 그러면 안되죠. 빨리 실행되는 리뷰면 굉장히 좋은 리뷰를 만든 듯. 
- 한개의 PR에 대해 리뷰할 때 평균 어느정도 시간이 소요되나요? 
  - 케바케. 어떤거는 1~2분 짜리도 있고 어떤거는 10분 봐야되는 것도 있다. 팀에 10명이 있으면 나 빼고 9개를 30분 안에 해야되니까 하나당 거의 3분안에 해야한다. 
  - 우린 리뷰를 몇분안에 몇개를 해야한다 룰을 정하면 리뷰사이즈가 그거에 맞게 맞춰질 것이다. 
  - 리뷰가 오래 걸린다는 것은 PR의 크기가 굉장히 크다는 것이다. 그렇지 않으면 진짜 복잡하거나 엉망이거나.. 
  - 연사님은 틈 날 때마다 중간중간 했다. 하나당 수 분이었던 것 같다. 5분~10분
- PR을 어떤 기준으로 나누어야하는지 궁금합니다. 
  - 라인수로 많이 얘기를 한다. 변경 라인이 200라인 이하로 됐으면 좋겠다를 많이 봤다. 
- PR을 짧게 자주 하라고 하셨는데 기능 단위로 작업 후 PR을 하면 코드량이 어쩔수 없이 많아져요. 이럴 때는 어떻게 하나요?? 
  - 기능 하나에 대해서 꼭 PR을 하나만 만들어야 된다고 생각할 필요는 없다. 
  - 기능 중에 일부가 의미있게 완료되었을 때마다 나눠서 PR을 올리는 거다. 
  - 정 어쩔수 없이 나눌 수 없을 때는 커밋을 잘 해야한다. 
    - PR 디스크립션에 이건 도저히 나눌 수 없어서 크게 올렸다. 이걸 리뷰하실 때는 커밋 단위로 보시라. 한 번에 보시기엔 양이 너무 많을 거에요 라고 적자. 
- 페어 리뷰를 할 때, 어느 순간 제가 키보드를 잡고 있더라구요. 남의 코드를 맘대로 고치면 기분 나빠하지 않을까요? 
  - 결정은 저자가 하는거다. 그리고 크게 기분나빠하지 않을 것 같다. 
  - 연사님의 주니어 경험
    - 틀린 답을 만들어도 선배가 기다려 줬었다. 그정도면 괜찮은 답이야 라고 용기를 줬었다. 
  - 내가 하면 금방 끝나 기다려 라고 하지 말아라.
- 리뷰 받은 내용이 오히려 코드를 읽기 난해하게 하는 등 퀄리티를 낮추는 것이여서 그것의 이유를 상대방에게 설명을 했음에도 그것을 받아들이지 못한다면 어떻게 해야하나요? 
  - 팀장님한테 부탁을 하거나 심각한게 아니면 져주어라. 다 들어주지는 말고 약간 들어줘라. 정 힘들면 팀장님에게 에스컬레이션
- 짝코딩을 시도했는데 상대 개발자분이 라이브로 코딩하는 것에 부담을 느끼는지 코드리뷰형태로 변합니다. 짝코딩 잘 할 수 있는 방법 있을까요? 
  - 거부감을 느끼는 부분이 있지 않을까? 하고 한번 찾아보시고 그분은 정 불편하시면 코드리뷰형태로 하면 된다. 
- 특정 회사나 팀에 지원할 때, 정말로 코드리뷰나 공유 등 문화에 신경을 쓰는구나를 알아볼 수 있는 것들이 있을까요? 
  - 테크세미나나 블로그 등 환경, 블라인드, 동료 와의 얘기 정도.